<template><el-card><el-form inline><el-form-item><el-input v-model="query.keyword" placeholder="搜索"/></el-form-item><el-form-item><el-input v-model="query.type" placeholder="类型"/></el-form-item><el-button @click="load">查询</el-button></el-form><el-table :data="list" v-loading="loading"><el-table-column prop="title" label="标题"/><el-table-column prop="type" label="类型"/><el-table-column label="标签"><template #default="s"><el-tag v-for="t in s.row.tags" :key="t">{{t}}</el-tag></template></el-table-column><el-table-column prop="status" label="状态"/><el-table-column label="剩余"><template #default="s">{{s.row.remaining}}</template></el-table-column><el-table-column><template #default="s"><el-button @click="$router.push('/app/activities/'+s.row.id)">详情</el-button></template></el-table-column></el-table><el-empty v-if="!list.length&&!loading" description="暂无活动"/></el-card></template>
<script setup lang="ts">import { onMounted, reactive, ref } from 'vue';import { http } from '../../api/http';
const query=reactive({keyword:'',type:'',page:1,pageSize:10});const list=ref<any[]>([]);const loading=ref(false);
const load=async()=>{loading.value=true;const{data}=await http.get('/activities',{params:query});list.value=data.data;loading.value=false;};onMounted(load);
</script>
